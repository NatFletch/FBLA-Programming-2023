<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: setup.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: setup.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const db_client = require('../modules/db_client')


//Checks to see if the db tables were already created
var needs_update = false
var update_option = "user_profiles"

/**
 *  * update_tables(option) is a function that updates the tables in the database. 
 * We have three tables: user_profiles, events, and user_inventory.
 * @param {string} option 
 */
function update_tables(option){
    if (option == "user_profiles"){
        db_client.query("UPDATE TABLE user_profiles", (err, res) => {
            if (err) throw err
            console.log(res)
        })
    } else if(option == "events"){
        db_client.query("UPDATE TABLE events", (err, res) => {
            if (err) throw err
            console.log(res)
        })
    } else if(option == "user_inventory"){
        db_client.query("UPDATE TABLE user_inventory", (err, res) => {
            if (err) throw err
            console.log(res)
        })
    }
}
/**
 * create_tables() is a function that creates the tables in the database.
 * We have three tables: user_profiles, events, and user_inventory.
 * This function will only be called if the tables do not exist. (or in case someone clones the repo and wants to start from scratch)
 */
function create_tables(){
    db_client.query("CREATE TABLE user_profiles (Username text, FullName text, Password text, Points int, allTimePoints int, isTeacher int, Birthday date, Grade text)", (err, res) => {
        if (err) throw err
        console.log(res)
    })
    db_client.query("CREATE TABLE events (Title text, Location text, Time text, Description text, Interested int)", (err, res) => {
        if (err) throw err
        console.log(res)
    })
    db_client.query("CREATE TABLE user_inventory (Username text, Items text[])", (err, res) => {
        if(err) throw err
        console.log(res)
    })
}

if(db_client.query("SELECT * FROM user_profiles") &amp;&amp; !needs_update){
    console.log('Skipping setup...')
} else if (needs_update == true){
    update_tables(update_option)
} else {
    create_tables()
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addToCart">addToCart</a></li><li><a href="global.html#addUserToDatabase">addUserToDatabase</a></li><li><a href="global.html#changePoints">changePoints</a></li><li><a href="global.html#checkAdmin">checkAdmin</a></li><li><a href="global.html#checkout">checkout</a></li><li><a href="global.html#clearCart">clearCart</a></li><li><a href="global.html#create_tables">create_tables</a></li><li><a href="global.html#deletePost">deletePost</a></li><li><a href="global.html#displayCart">displayCart</a></li><li><a href="global.html#getItemName">getItemName</a></li><li><a href="global.html#getItemPoints">getItemPoints</a></li><li><a href="global.html#interestClicked">interestClicked</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#postEvent">postEvent</a></li><li><a href="global.html#registerClick">registerClick</a></li><li><a href="global.html#registerClick2">registerClick2</a></li><li><a href="global.html#selectPostDelete">selectPostDelete</a></li><li><a href="global.html#update_tables">update_tables</a></li><li><a href="global.html#user">user</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Jun 28 2023 08:17:03 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
